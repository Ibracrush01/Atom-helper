<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Формулы по математике</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap">
        <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
        <style>
        :root {
        --background-color: linear-gradient(135deg, #0d0d2b, #0b3d91);
        --text-color: #ffffff;
        --card-bg: rgba(255, 255, 255 , 0.1);
        --card-border: rgba(255, 255, 255, 0.2);
        --content-bg: rgba(0,0,0,0.3);
    }
    body.light {
        --background-color: linear-gradient(135deg, #e3f2fd, #bbdefb);
        --text-color: #000000;
        --card-bg: rgba(0,0,0,0.05);
        --card-border: rgba(0,0,0,0.1);
        --formula-bg: rgba(255,255,255 , 0.3);
    }
    body {
        font-family: 'Montserrat', sans-serif;
        background: var(--background-color);
        color: var(--text-color);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }
    .container {
      max-width: 1000px;
      margin: auto;
    }
    .theme {
      position: fixed;
      top: 15px;
      right: 20px;
      font-size: 22px;
      cursor: pointer;
      z-index: 1000;
    }
    .categories {
     display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        font-family: 'Montserrat';
    }
    .category-button {
       background-color: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 15px 25px;
        font-size: 16px;
        color: var(--text-color);
        cursor: pointer;
        transition: background 0.3s, transform 0.2s;
        min-width: 160px;
        text-align: center;
    }
    .category-button:hover {
      transform: scale(1.05);
    }
    .content-area {
      background: var(--content-bg);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      align-content: center;
    }
    .calculator-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  width: 100%;
}
.calc-button {
  padding: 15px;
  font-size: 16px;
  border-radius: 10px;
  cursor: pointer;
  background-color: var(--card-bg);
  border: 1px solid var(--card-border);
  color: var(--text-color);
  transition: transform 0.2s, background 0.3s;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.calc-display {
    width: 94%;;
    padding:20px;
  font-size: 28px;
  text-align: right;
  margin-bottom: 20px;
  padding: 12px;
  border-radius: 12px;
  background-color: #fff;
  color: #000;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.1);
  border:none;
  margin-bottom: 20px;
}
.calc-button:hover {
    transform: scale(1.05);
    background-color: rgba(255, 255, 255, 0.2);
}

    .example, .quiz {
      margin-top: 20px;
    }
    .quiz label {
      display: block;
      margin: 4px 0;
    }
h1 {
    text-align: center;
}
.content-area{
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.calc {
    width: 100%;
    max-width: 400px;
    margin:0 auto;
    padding: 20px;
    background: var(--card-bg);
    border-radius: 16px;
    box-shadow:0 6px 20px rgba(0,0,0,0.2);
}
    </style>
    </head>
    <body>
        <div class="theme" onclick="toggleTheme()">
            <i id="themeicon" class="fas fa-moon"></i>
        </div>
        <div class="container">
            <h1>Формулы по математике</h1>
            <div class="categories">
            <button class="category-button" onclick="showFormulas('all')"><i class="fas fa-layer-group">Все формулы</i></button>
            <button class="category-button" onclick="showFormulas('algebra')"><i class="fas fa-square-root-alt">Алгебра</i></button>
            <button class="category-button" onclick="showFormulas('geometry')"><i class="fas fa-draw-polygon">Геометрия</i></button>
            <button class="category-button" onclick="showFormulas('trig')"><i class="fas fa-wave-square">Тригонометрия</i></button>
            <button class="category-button" onclick="showFormulas('calculus')"><i class="fas fa-chart-line">Анализ</i></button>
        </div>
        <div id="formulaArea" class="content-area">
            <p>Выберите категорию, чтобы увидеть формулы.</p>
        </div>
        <div id="exampleArea" class="content-area calculator-wrapper"></div>
        <div class="content-area">
            <h2>Калькулятор</h2>
            <div class="calc">
            <input type="text" id="calcdisplay" class="calc-display"  readonly>
            <div class="calculator-grid">
                        <button class="calc-button" onclick="clearCalc()">C</button>
                        <button class="calc-button" onclick="appendCalc('(')">(</button>
                        <button class="calc-button" onclick="appendCalc(')')">)</button>
                        <button class="calc-button" onclick="appendCalc('/')">÷</button>
                        <button class="calc-button" onclick="appendCalc('sin(')">sin</button>
                        <button class="calc-button" onclick="appendCalc('cos(')">cos</button>
                        <button class="calc-button" onclick="appendCalc('tan(')">tan</button>
                        <button class="calc-button" onclick="appendCalc('*')">*</button>
                        <button class="calc-button" onclick="appendCalc('log(')">log</button>
                        <button class="calc-button" onclick="appendCalc('ln(')">ln</button>
                        <button class="calc-button" onclick="appendCalc('√(')">√</button>
                        <button class="calc-button" onclick="appendCalc('-')">-</button>
                        <button class="calc-button" onclick="appendCalc('7')">7</button>
                        <button class="calc-button" onclick="appendCalc('8')">8</button>  
                        <button class="calc-button" onclick="appendCalc('9')">9</button>
                        <button class="calc-button" onclick="appendCalc('^')">^</button>
                        <button class="calc-button" onclick="appendCalc('4')">4</button>
                        <button class="calc-button" onclick="appendCalc('5')">5</button>
                        <button class="calc-button" onclick="appendCalc('6')">6</button>
                        <button class="calc-button" onclick="appendCalc('+')">+</button>
                        <button class="calc-button" onclick="appendCalc('1')">1</button>
                        <button class="calc-button" onclick="appendCalc('2')">2</button>
                        <button class="calc-button" onclick="appendCalc('3')">3</button>
                        <button class="calc-button" onclick="calculate()">=</button>
                        <button class="calc-button" onclick="appendCalc('π')">π</button>
                        <button class="calc-button" onclick="appendCalc('0')">0</button>
                        <button class="calc-button" onclick="appendCalc('.')">.</button>
                        <button class="calc-button" onclick="appendCalc('e')">e</button>
             </div>
             </div>
        </div>
            <div class="content-area">
                    <h2>Тест</h2>
                    <div id="quizarea"></div>
                    <button onclick="submitQuiz()">Проверить ответы</button>
                    <p id="quizResult"></p>
                </div>
            <script>
                const formulas = {
                    all:[],
                    algebra:[
                        '\\( (a+b)^2 = a^2 + 2ab + b^2\\)',
                        '\\(a^2 - b^2 = (a-b)(a+b)\\)',
                        '\\( (x-y)^2 = x^2 - 2xy + y^2\\)'
                ],
                geometry:[
                    '\\(S = \\pi r^2\\)',
                    '\\(c^2 = a^2 + b^2\\)',
                    '\\( V = a^3\\) - обьем куба'
                ],
                trig:[
                    '\\(\\sin^2x + \\cos^2 = 1 \\)',
                    '\\(\\tan x = \\frac{\\sin x}{\\cos x}\\)',
                    '\\(\\cos(2x) = 2 \\cos^2x - 1\\)'
                ],
                calculus: [
                    '\\(\\frac{d}{dx}x^n = nx^{n-1}\\)',
                    '\\(\\int x^n dx = \\frac{x^{n+1}}{n+1} + C\\)',
                    '\\(\\frac{d}{dx}\\sin x = \\cos x \\)'
                ]
                };
                formulas.all = [...formulas.algebra, ...formulas.geometry, ...formulas.trig,...formulas.calculus];
                const examples = {
                    algebra: ['\\((x+3) = x^2 + 6x + 9\\)', '5x - 2 =13 → x = 3'],
                    geometry: ['Площадь круга радиуса 7: S = 49π', 'Периметр квадрата со стороной 4: P =16'],
                    trig:['sin(30°) = \\(\\frac{1}{2}\\)', 'cos(60°) = \\(\\frac{1}{2}\\)'],
                    calculus: [ '\\(\\frac{d}{dx}\\) (x³) = 3x²', '\\(∫ x dx = \\frac{x^2}{2} + c\\)']
                };
                const quiz = [
                    {q: 'Производная x²?', a: '2x', o: ['x', '2x', 'x²']},
                    {q: 'Интеграл x²', a:'\\(\\frac{\\x^3}{3}\\)', o:['\\(x^3\\)','\\(\\frac{x^3}{3}\\)','\\(\\frac{x^2}{2}\\)']},
                    {q: 'sin(0)?', a: '0', o: ['0','1','undefined']},
                    {q: 'cos(0)?', a: '1', o: ['0','1','undefined']},
                    {q:'∫ dx?', a: 'x + C', o:['x', 'x+C','1']},
                    {q:'Производная константы?', a:'0', o:['0', '1', 'x']},
                    {q:'tan(45°)?', a:'1', o:['0','1','√3']},
                    {q:'√25', a: '5',o:['5','6','4']},
                    {q:'ln(e)', a: '1',o:['0','1','e']},
                    {q:'a²- b²=?', a: '(a-b)(a+b)',o:['a²+b²','(a-b)(a+b)','2ab']},
                    {q:'cos²x + sin²=?', a: '1',o:['0','1','2']},
                    {q:'Производная sin(x)', a: 'cos(x)',o:['sin(x)','cos(x)','-cos(x)']},
                    {q:'∫ cos(x) dx?', a: 'sin(x) + C',o:['cos(x)','sin(x) + C','-cos(x)']},
                    {q:'\\(\\frac{d}{dx}\\) ln(x)?', a: '\\(\\frac{1}{x}\\)',o:['x','\\(\\frac{1}{x}\\)','ln(x)']},
                    {q:'lim x→0 \\(\\frac{sin x}{x}\\)', a: '1',o:['0','1','∞']},
                ];
                function showFormulas(category) {
                    const list = formulas[category] || [];
                    const ex = examples[category] || [];
                    document.getElementById("formulaArea").innerHTML = '<ul>' + list.map(f => `<li>${f}</li>`).join('') + '</ul>';
                    document.getElementById("exampleArea").innerHTML = '<h3>Примеры</h3><ul>' + ex.map(e => `<li>${e}</li>`).join('') + '</ul>';
                    if (window.MathJax) MathJax.typesetPromise();
                }
                function appendCalc(value){
                    document.getElementById("calcdisplay").value += value;
                }
                function clearCalc(){
                    document.getElementById("calcdisplay").value = '';
                }
                function calculate() {
                    try {
                        let exrp = document.getElementById("calcdisplay").value;
                        exrp = exrp
                        .replace(/π/g, 'Math.PI')
                        .replace(/\be\b/g, 'Math.E')
                        .replace(/√\(/g, 'Math.sqrt(')
                        .replace(/\^/g, '**')
                        .replace(/\bsin\(/g, 'Math.sin(')
                        .replace(/\bcos\(/g, 'Math.cos(')
                        .replace(/\btan\(/g, 'Math.tan(')
                        .replace(/\blog\(/g, 'Math.log10(')
                        .replace(/\bln\(/g, 'Math.log(')
                        .replace(/,/g, '.');
                        const result = Function('"use strict"; return (' + exrp + ')')();
                        document.getElementById("calcdisplay").value = isFinite(result) ? +result.toFixed(10) : 'Ошибка';
                    } catch(e) {
                        document.getElementById("calcdisplay").value = 'Ошибка';
                    }
                }
                function toggleTheme() {
                    const body= document.body;
                    const icon = document.getElementById("themeicon");
                    body.classList.toggle("light");
                    icon.classList.toggle("fa-moon");
                    icon.classList.toggle("fa-sun");
                }
                function renderQuiz() {
                    const area = document.getElementById("quizarea");
                    area.innerHTML = quiz.map((q, i) => `<p>${q.q}</p>
                    ${q.o.map(opt => `<label><input type='radio' name='q${i}' value='${opt}'>  ${opt}</label>`).join('')}`).join('');
                }
                function submitQuiz() {
    let score = 0;
    quiz.forEach((q, i) => {
        const checked = document.querySelector(`input[name='q${i}']:checked`);
        if (
            checked &&
            checked.parentElement.textContent.trim() === q.a.replace(/\\\(|\\\)/g, '').trim()
        ) {
            score++;
        }
    });
    document.getElementById("quizResult").textContent = `Правильные ответы: ${score} из ${quiz.length}`;
}
                    renderQuiz();
                window.addEventListener('load', () => {
                    if (window.MathJax && MathJax.typesetPromise) {
                        MathJax.typesetPromise();
                    }
                });
            </script>
            <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>